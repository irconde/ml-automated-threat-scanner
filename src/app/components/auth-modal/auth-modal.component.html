<mat-card>
  <mat-tab-group dynamicHeight>
    <mat-tab label="USER LOGIN">
      <form (ngSubmit)="handleLogin($event)" [formGroup]="loginForm">
        <div class="form-row">
          <app-underline-input type="text" leadingIcon="person" placeholder="Username*"
                               [errorMessage]="loginForm.controls.username.errors?.['errorMsg']"
                               formControlName="username"></app-underline-input>
        </div>

        <div class="form-row">
          <app-underline-input leadingIcon="lock" placeholder="Password*"
                               [errorMessage]="loginForm.controls.password.errors?.['errorMsg']"
                               inlineIcon="visibility"
                               altInlineIcon="visibility_off"
                               type="password"
                               formControlName="password"
          ></app-underline-input>
        </div>

        <div class="form-row">
          <mat-checkbox [disabled]="formDisabled(loginForm)">Keep me signed in</mat-checkbox>
        </div>

        <ng-container *ngIf="!loginFormError; else errorDiv">
          <button mat-button class="form-button" [class.form-error]="loginFormError"
                  [disabled]="formDisabled(loginForm)">
            <ng-container class="submit-button-div" *ngIf="isLoading; else loginText">
              <div class="submit-button-div">
                <span>SIGNING IN</span>
                <img ngSrc="assets/loading-spinner.svg" class="loading-spinner" alt="loading spinner" height="20"
                     width="20">
              </div>
            </ng-container>
            <ng-template #loginText>
              LOG IN
            </ng-template>
          </button>
        </ng-container>
        <ng-template #errorDiv>
          <button mat-button class="form-button" [class.form-error]="loginFormError">
            <div class="submit-button-div">
              <span>LOGIN FAILED</span>
              <mat-icon class="fail-icon" fontSet="material-icons-outlined">error_outline</mat-icon>
            </div>
          </button>
        </ng-template>
      </form>
    </mat-tab>
    <mat-tab label="NEW ACCOUNT">
      <form (submit)="handleSignup($event)" [formGroup]="registerForm">
        <div class="form-row">
          <app-underline-input leadingIcon="person"
                               placeholder="Username*"
                               formControlName="username"
                               [errorMessage]="registerForm.controls.username.errors?.['errorMsg']"
          ></app-underline-input>
        </div>

        <div class="form-row">
          <app-underline-input leadingIcon="email"
                               placeholder="Email address*"
                               formControlName="email"
                               [errorMessage]="registerForm.controls.email.errors?.['errorMsg']"
          ></app-underline-input>
        </div>

        <div class="form-row">
          <app-underline-input leadingIcon="lock"
                               placeholder="Password*"
                               formControlName="password"
                               inlineIcon="visibility"
                               altInlineIcon="visibility_off"
                               type="password"
                               [errorMessage]="registerForm.controls.password.errors?.['errorMsg']"
          ></app-underline-input>
        </div>
        <ng-container *ngIf="!signUpError; else errorDiv">
          <button mat-button class="form-button" [class.form-error]="signUpError"
                  [disabled]="formDisabled(registerForm)">
            <ng-container class="submit-button-div" *ngIf="isLoading; else createText">
              <div class="submit-button-div">
                <span>CREATING ACCOUNT</span>
                <img ngSrc="assets/loading-spinner.svg" class="loading-spinner" alt="loading spinner" height="20"
                     width="20">
              </div>
            </ng-container>
            <ng-template #createText>
              CREATE ACCOUNT
            </ng-template>
          </button>
        </ng-container>
        <ng-template #errorDiv>
          <button mat-button class="form-button" [class.form-error]="signUpError">
            <div class="submit-button-div">
              <span>CREATION FAILED</span>
              <mat-icon class="fail-icon" fontSet="material-icons-outlined">error_outline</mat-icon>
            </div>
          </button>
        </ng-template>
      </form>
    </mat-tab>
  </mat-tab-group>
</mat-card>
